# geektopjekyll

Выполняю обучение созданию статического сайта под определенную идею - создание высонагруженного сайта, которого не возможно взломать, так как у него нет админки.

В этом документе буду описывать шаги настройки окружения, установки и использования всех необходимых для этого процесса программ.

## Шаг Первый

Установить систему Linux в систему Windows. В Панель управления => программы компоненты => Включение или отключение компонентов Windows. В списке активировать пункт Подсистема Windows для Linux.
Windows+R ввести слово control.

Зайти в магазин Windows. Установить и запустить систему Ubuntu.
Создать пользователя и пароль.
Настройка по клику в папке Открыть окно Bach здесь:
запустить файл Add_Open_Bash_context_menu.

открыть окно Bash в любом месте и вставить строку

sudo apt-add-repository -y ppa:brightbox/ruby-ng; sudo apt-get update; sudo apt-get -y install curl ruby2.5 ruby2.5-dev gcc make g++ libffi-dev; curl -sL https://deb.nodesource.com/setup_8.x | sudo -E bash -; sudo apt-get -y install nodejs; sudo gem i jekyll; sudo gem i jekyll-paginate-v2; sudo npm i -g gulp rimraf npm-check-updates; sudo chown -R $USER:$(id -gn $USER) /home/$USER/.config

После установки компоненов появится запрос на перегрузку. Перегрузить.

## Шаг второй

Создал каталог geektopjekyll в него буду загружать все необходимое для разработки. Открыл его VSCode.
Открыл терминал.
Установил бандл          sudo gem i bundle
Инициализирую мой сайт   sudo jekyll new geektop

В каталоге создался новый сайт по имени geektop

В сайте оставить каталог \_posts без файлов, файлы \_config.yml, 404.html.

## Шаг третий

Открыть файл Конфиг и прописать настройки, они в файле уже находятся

## Шаг четвертый

На этом шаге выполняется создание файлов для работы
\_layouts - размещаются основные шаблоны jekyll
\_plugins - размещаются необходимые для работы плагины
\_posts - размещаются посты, которые будут размещаться на сайте
blog - основная папка категория блог, в ней находятся все категории
images - находятся изображения, которые являются частью контента
robots.txt - файл по умолчанию
sitemap.xml - файл по умолчанию
rss.xml - файл по умолчанию
search.html - так как сайт статический, используется поиск от Google
\_includes - размещены кусочки кода, которые должны повторяться

## Шаг пятый

Теперь необходимо перенести верстку в jekyll:img/, \*.html, scss/, js/, libs/, ht.access
ht.access необходимо настроить дополнительно и переименовать на хостинге
Файл находится в каталоге и готов к использованию

## Шаг шестой

Создание главного загрузочного файла index.html
В него размещаем директиву использования layout: home, его будем настраивать в каталоге \_layout

Создание внутреней страницы сайта о нас, она будет называться about.html
В него размещаем директиву использования layout: about, его будем настраивать в каталоге \_layout

## Шаг седьмой

Необходимо настроить файл gulpfile.js. Это необходимо сделать так как измениласть структура проекта и необходимо определить каталоги генерации важных файлов и корневую директорию сервера

Открыть Bash в каталоге корневом сайта, там где файл package.json
Проверить актуальность пакетов ncu
Выполнить апгрейд ncu -u
Установить пакеты npm i
Запустить генерацию статического сайта jekyll b
Найти каталог \_site
Если операция завершена некоректно, искать причину в конфликтах комонентов сборки с jekyll 4.0.0. Конфликт необходимо устранить либо удать
sudo gem uninstall jekyll-4.0.0  или любую другую версию выше 4.0.0.

Чтобы проверить версии jekyll -v
                       jekyll-paginate-v2 -v

## Шаг восьмой

\_layouts - сюда забросить файл index.html переименовать в home.html,
в корне сайта создать пустой файл index.html прописать такие строки

```
---
layout: home
---
```
Этим самым к главной странице сайта подключается файл home.html

В папке \_includes создать файлы, которые будут содержать части кода страницы, в моем случае главной. Итак, создаем файл header-home.html, разместите кусок кода из файла home.html.

В файл home.html размещается следующий код:

```
{% include /header-home.html %}
```

Подобные операции необходимо проделать с другими блоками. В итоге будет выполняться двойное подключение блоков header-home.html => home.html => index.html

Вывод информации из В итоге на главной странице сайта
К примеру в файле \_config.yml присутствует такой параметр

```
 title: GeekTOP - Новости IT
```
Чтобы его вставить в шаблон необходимо открыть файл header-home.html, найти тег

```
	<title>Некий текст</title>
```
заменить на
```
	<title>{{  site.title  }}</title>
```
где
* site - контанта,
* расстояние между параметрами и опараторами два пробела(важно)
* title - параметр в файле \_config.yml
  * в файле \_config.yml возможно также указать описание главной страницы сайта
  * в файле \_config.yml возможно также указать ключевые слова главной страницы сайта

## Шаг девятый

Разрезаем весь index файл.
Вырезать меню и вынести в отдельный файл.

* вырезаем код повторяющихся items
* создать файл home-first-section-item-one.html
* вставить в него код только одного item из нескольких
* подключаю в месте, откуда вырезал код повторяющихся items

## Шаг десятый

* Файл \_all-posts.html перенести в каталог \_layouts
* Файл переименовать в blog.html

## Шаг одиннадцатый

В каталоге blog создать файл index.html. Заполнить таким образом

```
---
layout: blog
title: Все статьи
discription: Все статьи на сайте об електронике
pagination
  enabled:true
---
```

В каталоге blog создать папки. Их название должны соответсвовать названиям катерий, которые были использованы в создании навигации по сайту.

## Шаг двенадцатый

 В каждой папке создать файл index.html
 В него закинуть содердимое, как пример для категории div

```
---
layout: category
category: div
title: DIV
discription: Все статьи на сайте об  div
image: 'images/div/cover.jpg'
pagination
  enabled:true
  category: div
---
```

Сверстанный файл для шаблона \_category.html переместить в каталог \_layouts и удалить символ нижнего подчеркивания.

image: 'images/div/cover.jpg' - 1920px X 720px

## Шаг тринадцатый

Заполнить первые новостные блоки на главной странице сайта

```
{% for post in site.categories.lifehacks limit: 2 offset: 0 %}
{% include /home-first-section-item-one.html %}
{% endfor %}

{% for post in site.categories.lifehacks limit: 3 offset: 2 %}
{% include /include /home-first-section-item-two.html %}
{% endfor %}

```
Это значит что будут выводится 5 блоков с категории lifehacks, используя шаблоны записей home-first-section-item-one.html и home-first-section-item-two.html

## Шаг четырнадцатый

Чтобы посты отобразились на главной странце нужно их разместить на сайте.



ёёё








